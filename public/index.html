<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>In-Between: Multiplayer</title>
    <link rel="stylesheet" href="style.css">
    <script src="/socket.io/socket.io.js"></script>
</head>
<body>
    <audio id="bgm" src="music.mp3" loop></audio>

    <div class="timer-container"><div id="timer-bar" class="timer-bar" style="width: 0%;"></div></div>

    <div id="game-over-modal">
        <div class="result-title" id="go-title">YOU WON!</div>
        <div class="result-sub" id="go-sub">Opponent went bankrupt</div>
        <button class="btn-rematch" onclick="game.requestRematch()">PLAY AGAIN</button>
    </div>

    <div id="landing-page">

        <div class="online-indicator">
            <div class="online-dot"></div>
            <span id="online-count">0</span> Online
        </div>
        
        <div class="bg-suit" style="left: 10%; animation-duration: 8s;">‚ô†</div>
        <div class="bg-suit" style="left: 80%; animation-duration: 12s; animation-delay: 2s;">‚ô•</div>
        <div class="bg-suit" style="left: 20%; animation-duration: 15s; animation-delay: 5s;">‚ô£</div>
        <div class="bg-suit" style="left: 70%; animation-duration: 9s; animation-delay: 1s;">‚ô¶</div>

        <div class="title-container">
            <h1 class="title-line-1">In-Between</h1>
            
            <div class="title-line-2">
                <span class="pinoy-badge">PINOY VERSION üáµüá≠</span>
            </div>
        </div>
        
        <div class="identity-box">
            <div class="avatar-selector">
                <div class="avatar-opt selected" onclick="selectAvatar(this)">üòé</div>
                <div class="avatar-opt" onclick="selectAvatar(this)">ü§†</div>
                <div class="avatar-opt" onclick="selectAvatar(this)">üòà</div>
                <div class="avatar-opt" onclick="selectAvatar(this)">ü§ñ</div>
                <div class="avatar-opt" onclick="selectAvatar(this)">üê±</div>
            </div>
            <input type="text" id="input-nickname" class="input-name" placeholder="Enter Nickname" maxlength="10">
        </div>

        <div class="lobby-controls">
            <button class="btn-start" onclick="createRoom()">Create Room</button>
            <div class="row-inputs">
                <input type="text" id="input-room-code" placeholder="CODE">
                <button class="btn-start" style="margin:0; padding: 15px;" onclick="joinRoom()">Join</button>
            </div>
        </div>

        <button class="btn-settings" style="margin-top:20px;" onclick="toggleSettings(true)">‚öô Settings</button>
        <div class="footer-credit">
            Fun project by <a href="#" onclick="return false;">Raymart Panila</a>
        </div>
    </div>

    <div id="settings-modal">
        <div class="settings-box">
            <div class="settings-title">Game Settings</div>
            
            <div class="setting-row">
                <div class="setting-label">
                    <span>Background Music</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="input-music" checked onchange="toggleMusic(this.checked)">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>

            <div class="setting-row">
                <div class="setting-label">
                    <span>Sound Effects</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="input-sound" checked onchange="updateSettingsUI()">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>

            <button class="btn-close-settings" onclick="toggleSettings(false)">Close</button>
        </div>
    </div>

    <div id="create-modal">
        <div class="create-box">
            <div class="create-title">Room Rules</div>
            
            <div class="range-wrap">
                <div class="range-label">Initial Pot (Ante) <span id="val-ante" class="range-val">50</span></div>
                <input type="range" id="input-ante" class="range-input" min="50" max="500" step="50" value="50" 
                       oninput="document.getElementById('val-ante').innerText = this.value">
            </div>

            <div class="range-wrap">
                <div class="range-label">Pass Penalty <span id="val-penalty" class="range-val">10</span></div>
                <input type="range" id="input-penalty" class="range-input" min="10" max="100" step="10" value="10"
                       oninput="document.getElementById('val-penalty').innerText = this.value">
            </div>

            <button class="btn-confirm-create" onclick="confirmCreateRoom()">Start Game</button>
            <button class="btn-cancel" onclick="toggleCreateModal(false)">Cancel</button>
        </div>
    </div>

    <div id="bankrupt-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 10002; flex-direction: column; justify-content: center; align-items: center;">
    <h1 style="color: #e74c3c; font-size: 3rem; margin-bottom: 10px; text-transform: uppercase;">BUSTED!</h1>
    <p style="color: white; font-size: 1.2rem; margin-bottom: 30px;">You ran out of money.</p>
    
    <div style="display: flex; gap: 20px;">
        <button onclick="spectateGame()" style="background: #3498db; color: white; padding: 15px 30px; border: none; border-radius: 50px; font-weight: bold; cursor: pointer;">
            üëÄ Spectate
        </button>
        <button onclick="location.reload()" style="background: #95a5a6; color: white; padding: 15px 30px; border: none; border-radius: 50px; font-weight: bold; cursor: pointer;">
            üö™ Exit to Lobby
        </button>
    </div>
</div>

    <div id="game-wrapper">

        <button class="btn-leave" onclick="confirmLeave()">üö™ Leave</button>
        <div class="room-display">Room: <span id="disp-room-id">---</span></div>
        <div id="notification-area"></div>

        <div class="poker-table">
            
            <div class="seat seat-3 empty" id="seat-3">
                <div class="seat-avatar">?</div>
                <div class="seat-info"><span class="seat-name">Empty</span><span class="seat-money">---</span></div>
                <div class="chat-bubble" id="bubble-3"></div>
            </div>

            <div class="seat seat-2 empty" id="seat-2">
                <div class="seat-avatar">?</div>
                <div class="seat-info"><span class="seat-name">Empty</span><span class="seat-money">---</span></div>
                <div class="chat-bubble" id="bubble-2"></div>
            </div>

            <div class="seat seat-4 empty" id="seat-4">
                <div class="seat-avatar">?</div>
                <div class="seat-info"><span class="seat-name">Empty</span><span class="seat-money">---</span></div>
                <div class="chat-bubble" id="bubble-4"></div>
            </div>

            <div class="seat seat-1 empty" id="seat-1">
                <div class="seat-avatar">?</div>
                <div class="seat-info"><span class="seat-name">Empty</span><span class="seat-money">---</span></div>
                <div class="chat-bubble" id="bubble-1"></div>
            </div>

            <div class="seat seat-5 empty" id="seat-5">
                <div class="seat-avatar">?</div>
                <div class="seat-info"><span class="seat-name">Empty</span><span class="seat-money">---</span></div>
                <div class="chat-bubble" id="bubble-5"></div>
            </div>

            <div class="seat seat-0 active" id="seat-0">
                <div class="seat-avatar">üòé</div>
                <div class="seat-info"><span class="seat-name" id="p1-name">You</span><span class="seat-money" id="p1-bank">1000</span></div>
                <div class="chat-bubble" id="bubble-0"></div>
            </div>

            <div class="center-area">
                <div class="deck-stack" id="deck-anchor"></div>
                
                <div class="pot-container" id="pot-display-area">
                    <div class="pot-label">POT</div>
                    <div class="pot-amount" id="pot-val">0</div>
                </div>

                <div class="community-cards">
                    <div class="table-card-slot" id="slot-1"></div>
                    <div class="table-card-slot" id="slot-result"></div>
                    <div class="table-card-slot" id="slot-2"></div>
                </div>
            </div>
        </div>

        <div class="info-panel" style="position:absolute; top: 60%; width:100%; pointer-events:none;">
            <div class="main-msg" id="msg-main">Waiting for players...</div>
        </div>

        <div class="controls">
            <div id="panel-deal">
                <button class="btn-deal" id="btn-deal" onclick="game.startRound()">Start Round</button>
            </div>
            <div id="panel-bet" class="bet-ui">
                <div class="bet-info-row">
                    <span class="bet-label">AMOUNT:</span>
                    <span class="bet-number" id="bet-val">5</span>
                </div>

                <div class="slider-row">
                    <input type="range" id="bet-slider" min="5" max="100" step="5" value="5">
                    <button class="btn-all-in" onclick="game.setAllIn()">ALL IN</button>
                </div>

                <div class="btn-row">
                    <button class="btn-pass" id="btn-pass-action" onclick="game.playerAction(false)">PASS (-10)</button>
                    <button class="btn-bet" onclick="game.playerAction(true)">PLACE BET</button>
                </div>
            </div>
        </div>
    </div>

    <button class="chat-toggle" onclick="toggleChat()">üí¨</button>
    <div class="chat-panel" id="chat-panel">
        <div class="emote-grid">
            <button class="btn-emote" onclick="sendChat('üòÇ')">üòÇ</button>
            <button class="btn-emote" onclick="sendChat('üò°')">üò°</button>
            <button class="btn-emote" onclick="sendChat('üò±')">üò±</button>
            <button class="btn-emote" onclick="sendChat('ü§ë')">ü§ë</button>
            <button class="btn-emote" onclick="sendChat('Hurry!')">Hurry!</button>
            <button class="btn-emote" onclick="sendChat('GG!')">GG!</button>
        </div>
        <div class="chat-input-row">
            <input type="text" id="chat-input" placeholder="..." maxlength="15">
            <button class="btn-send" onclick="sendCustomChat()">‚û§</button>
        </div>
    </div>

    <script src="client.js"></script>
</body>
</html>